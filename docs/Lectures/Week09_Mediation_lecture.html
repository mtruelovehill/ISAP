<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title> Mediation </title>
    <meta charset="utf-8" />
    <meta name="author" content="Monica Truelove-Hill" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# <b> Mediation </b>
]
.subtitle[
## Inferential Statistics in Applied Psychology <br><br>
]
.author[
### Monica Truelove-Hill
]
.institute[
### Department of Clinical Psychology<br>The University of Edinburgh
]

---








### This Week's Key Topics

+ Moderation vs mediation

+ Direct, indirect, and total effects

+ Steps of mediation

+ Interpreting and reporting the results of a mediation analysis


---
### Review of Previous Models

.pull-left[
Model with a single IV:

&lt;img src="images/simpleEffect.png" style="display: block; margin: auto;" /&gt;
]

--

.pull-right[
Model with multiple IVs:
&lt;img src="images/multipleEffect.png" style="display: block; margin: auto;" /&gt;
]

---
### Review of Previous Models

.pull-left[
Moderation/Interaction between 2 predictors/IVs:
&lt;img src="images/modDiagram.png" style="display: block; margin: auto;" /&gt;

&lt;b&gt;Total effect&lt;/b&gt; = Effect of Predictor A + Effect of Predictor B + Interaction between A &amp; B
]

--

.pull-right[
When an interaction occurs:

+ The effect of &lt;span style = "color:#30726E"&gt;&lt;b&gt;Predictor A&lt;/b&gt;&lt;/span&gt; on the &lt;span style = "color:#F28157"&gt;&lt;b&gt;outcome&lt;/b&gt;&lt;/span&gt; &lt;i&gt; changes&lt;/i&gt; based on the value of &lt;span style = "color:#F2B66D"&gt;&lt;b&gt;Predictor B&lt;/b&gt;&lt;/span&gt;.

+ &lt;span style = "color:#30726E"&gt;&lt;b&gt;Predictor A&lt;/b&gt;&lt;/span&gt; has a direct association with the &lt;span style = "color:#F28157"&gt;&lt;b&gt;outcome&lt;/b&gt;&lt;/span&gt;, but the strength and direction of this association varies depending on &lt;span style = "color:#F2B66D"&gt;&lt;b&gt;Predictor B&lt;/b&gt;&lt;/span&gt;.

]

---
### Introduction to Mediation

.pull-left[
&lt;img src="images/fullMed.png" style="display: block; margin: auto;" /&gt;
]

--

.pull-right[
When mediation occurs:

+ The effect of the &lt;span style = "color:#30726E"&gt;&lt;b&gt;predictor&lt;/b&gt;&lt;/span&gt; on the &lt;span style = "color:#F28157"&gt;&lt;b&gt;outcome&lt;/b&gt;&lt;/span&gt; is (at least partially) &lt;i&gt; through &lt;/i&gt; the &lt;span style = "color:#F2B66D"&gt;&lt;b&gt;mediator&lt;/b&gt;&lt;/span&gt;.

+ The &lt;span style = "color:#30726E"&gt;&lt;b&gt;predictor&lt;/b&gt;&lt;/span&gt; may have some direct association with the &lt;span style = "color:#F28157"&gt;&lt;b&gt;outcome&lt;/b&gt;&lt;/span&gt;, but it also may not; the relationship may be entirely explained by the &lt;span style = "color:#F2B66D"&gt;&lt;b&gt;mediator&lt;/b&gt;&lt;/span&gt;.

]

---
### Introduction to Mediation

.pull-left[
&lt;img src="images/fullMed.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[
When mediation occurs:

+ The effect of the &lt;span style = "color:#30726E"&gt;&lt;b&gt;predictor&lt;/b&gt;&lt;/span&gt; on the &lt;span style = "color:#F28157"&gt;&lt;b&gt;outcome&lt;/b&gt;&lt;/span&gt; is (at least partially) &lt;i&gt; through &lt;/i&gt; the &lt;span style = "color:#F2B66D"&gt;&lt;b&gt;mediator&lt;/b&gt;&lt;/span&gt;.

+ The &lt;span style = "color:#30726E"&gt;&lt;b&gt;predictor&lt;/b&gt;&lt;/span&gt; may have some direct association with the &lt;span style = "color:#F28157"&gt;&lt;b&gt;outcome&lt;/b&gt;&lt;/span&gt;, but it also may not; the relationship may be entirely explained by the &lt;span style = "color:#F2B66D"&gt;&lt;b&gt;mediator&lt;/b&gt;&lt;/span&gt;.

`$$Proportion\ Mediated = \frac{effect\ via\ mediator}{total\ effect\ on\ outcome}$$`
+ Larger mediating effects suggest that a greater proportion of the relationship between the predictor on the outcome is explained by the mediator (rather than the predictor itself)

]

---
### Key Mediation Effects

.pull-left[

&lt;img src="images/indirectEffect.png" style="display: block; margin: auto;" /&gt;

.center[
**Total Effect = Indirect Effect + Direct Effect**
]]

.pull-right[

+ **Total:** The full effect of the predictor on the outcome 
`$$a*b + c'$$`
]
---
### Key Mediation Effects

.pull-left[

&lt;img src="images/indirectEffect.png" style="display: block; margin: auto;" /&gt;

.center[
**Total Effect = Indirect Effect + Direct Effect**
]]

.pull-right[

+ **Total:** The full effect of the predictor on the outcome 
`$$a*b + c'$$`

&gt; **Test Your Understanding:** Have a look at the diagram, and compare it to the equation above. Which part of the above equation reflects the direct effect? Which part reflects the indirect effect?

]

---
### Key Mediation Effects

.pull-left[

&lt;img src="images/indirectEffect.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

+ Total: The full effect of the predictor on the outcome
`$$a*b + c'$$`

+ **Indirect:** The effect of the predictor on the outcome that is due to the mediator
`$$a*b$$`

]

---
### Key Mediation Effects

.pull-left[

&lt;img src="images/indirectEffect.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

+ Total: The full effect of the predictor on the outcome 
`$$a*b + c'$$`

+ Indirect: The effect of the predictor on the outcome that is due to the mediator 
`$$a*b$$`

+ **Direct:** The effect of the predictor that's left after the effect of the mediator is accounted for 
`$$c'$$`

]


---
class: center, inverse, middle

## Questions?

---
### The Logic Behind Mediation Analysis

+ If mediation is present:

  + There should be a relationship between the predictor and the outcome
  + There should be a relationship between the predictor and the mediator
  + The presence of the mediator should weaken the association between the predictor and the outcome.
  
+ These ideas can be tested using regression models
  
--

+ A mediation analysis is a combination of regressions:

`$$Mediator\sim \beta_0 + \beta_1Predictor$$`
`$$Outcome\sim \beta_0 + \beta_1Predictor + \beta_2Mediator$$`

---
### Mediation Analysis: Under the Hood

.pull-left[
+ Recall that the direct effect is the effect of the predictor that's left after the effect of the mediator is accounted for ( `\(c'\)`)

+ `\(c'\)` is reflected by `\(\beta_1\)` from the following model:

`$$Outcome \sim \beta_0 + \color{#30726E}{\beta_1}Predictor + \beta_2Mediator$$`

]

.pull-right[
&lt;img src="images/directEffect.png" style="display: block; margin: auto;" /&gt;
]

---
### Mediation Analysis: Under the Hood

.pull-left[
+ The indirect effect is the effect of the predictor that occurs via the mediator ( `\(a*b\)`)

+ `\(a\)` is reflected by `\(\beta_1\)` from this model:

`$$Mediator \sim \beta_0 + \color{#30726E}{\beta_1}Predictor$$`
+ `\(b\)` is reflected by `\(\beta_2\)` from this model:
`$$Outcome \sim \beta_0 + \beta_1Predictor + \color{#30726E}{\beta_2}Mediator$$`

]

.pull-right[
&lt;img src="images/indirectEffect.png" style="display: block; margin: auto;" /&gt;
]

---
### In-Class Example

.pull-left[

You can download the data for today's example [here](https://mtruelovehill.github.io/ISAP/Data/parentalConflict.sav).

+ `Conflict`: Conflict in the household; higher numbers = more conflict

+ `MalCope`: Maladaptiveness of child's coping mechanisms; higher numbers = more maladaptive

+ `Anx`: Child's anxiety levels; higher numbers = higher anxiety
]

.pull-right[

&lt;img src="images/mediationExample.png" style="display: block; margin: auto;" /&gt;

]
---
### Path C'

.pull-left[

&lt;img src="images/pathC.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

&lt;img src="images/pathCEffect.png" style="display: block; margin: auto;" /&gt;

]

---
### Path A

.pull-left[

&lt;img src="images/pathA.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

&lt;img src="images/pathAEffect.png" style="display: block; margin: auto;" /&gt;

]

---
### Path B

.pull-left[

&lt;img src="images/pathB.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

&lt;img src="images/pathBEffect.png" style="display: block; margin: auto;" /&gt;

]

---
### Direct Effect - c'

.pull-left[

&lt;img src="images/pathC.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

&lt;img src="images/directHighlight.png" style="display: block; margin: auto;" /&gt;

]
---
### Indirect Effect - `\(a\times b\)`

.pull-left[

&lt;img src="images/pathA.png" style="display: block; margin: auto;" /&gt;

&lt;img src="images/pathB.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

&lt;img src="images/indirectHighlight.png" style="display: block; margin: auto;" /&gt;

`\(.6297 \times .2136 = .1345\)`

]

---
### Total Effect - `\(a \times b + c'\)`


`$$.1345 + .1987 = .3332$$`

&lt;img src="images/totalHighlight.png" width="65%" style="display: block; margin: auto;" /&gt;

---
### Interpreting mediation results

+ The **direct** effect: the increase in the outcome that occurs with a one-unit increase in the predictor *over and above* the increase that occurs via the mediator

+ The **indirect** effect: the increase in the outcome that occurs via the mediator when the predictor increases by one unit. 

+ The **total** effect: the increase in the outcome expected to occur when the predictor increases by one unit. 

---
class: middle, center, inverse

## Questions?

---
### Interpreting the Indirect Effect

.pull-left[

+ The indirect effect of the mediation analysis is evaluated using bootstrapped confidence intervals rather than a `\(p\)`-value 

+ **Bootstrapping:** A statistical technique through which a parameter is estimated through the use of random resampling from a sample

]


.pull-right[
&lt;img src="images/indirectHighlight.png" style="display: block; margin: auto;" /&gt;
]

---
### A Quick Run-Through of Bootstrapping

+ Bootstrapping treats the sample as a population, and takes multiple samples from it

+ From these samples, a confidence interval for the desired parameter can be computed

--

.pull-left[
&lt;img src="images/population.png" style="display: block; margin: auto;" /&gt;
Imagine you have this sample.

]

---
### A Quick Run-Through of Bootstrapping

+ Bootstrapping treats the sample as a population, and takes multiple samples from it

+ From these samples, a confidence interval for the desired parameter can be computed

.pull-left[
&lt;img src="images/samp1.png" style="display: block; margin: auto;" /&gt;
To bootstrap, you take a new sample with the same `\(n\)`, using **resampling**
]


.pull-right[

&lt;img src="Week09_Mediation_lecture_files/figure-html/unnamed-chunk-29-1.svg" style="display: block; margin: auto;" /&gt;
...and compute the parameter of interest using the new sample. 

]

---
### A Quick Run-Through of Bootstrapping

+ Bootstrapping resamples treats the sample as a population, and takes multiple samples from it

+ From these samples, a confidence interval for the desired parameter can be computed

.pull-left[
&lt;img src="images/samp2.png" style="display: block; margin: auto;" /&gt;
You do this over and over...
]

.pull-right[

&lt;img src="Week09_Mediation_lecture_files/figure-html/unnamed-chunk-31-1.svg" style="display: block; margin: auto;" /&gt;
...and compute the parameter of interest each time.

]

---
### A Quick Run-Through of Bootstrapping

+ Bootstrapping resamples treats the sample as a population, and takes multiple samples from it

+ From these samples, a confidence interval for the desired parameter can be computed

.pull-left[

&lt;img src="images/samp3.png" style="display: block; margin: auto;" /&gt;
You do this over and over...
]

.pull-right[

&lt;img src="Week09_Mediation_lecture_files/figure-html/unnamed-chunk-33-1.svg" style="display: block; margin: auto;" /&gt;
...and compute the parameter of interest each time.

]

---
### A Quick Run-Through of Bootstrapping

+ Bootstrapping resamples treats the sample as a population, and takes multiple samples from it

+ From these samples, a confidence interval for the desired parameter can be computed

.pull-left[
&lt;img src="images/samp4.png" style="display: block; margin: auto;" /&gt;
You do this over and over...
]

.pull-right[

&lt;img src="Week09_Mediation_lecture_files/figure-html/unnamed-chunk-35-1.svg" style="display: block; margin: auto;" /&gt;
...and compute the parameter of interest each time.

]

---
### A Quick Run-Through of Bootstrapping


&lt;img src="Week09_Mediation_lecture_files/figure-html/unnamed-chunk-36-1.svg" style="display: block; margin: auto;" /&gt;

+ This process is repeated over and over until there is a distribution of your parameter of interest:


---
### A Quick Run-Through of Bootstrapping


&lt;img src="Week09_Mediation_lecture_files/figure-html/unnamed-chunk-37-1.svg" style="display: block; margin: auto;" /&gt;

+ This process is repeated over and over until there is a distribution of your parameter of interest:

+ From this distribution, the confidence interval can be computed.

---
class: inverse, middle, center

## Questions?

---
### Conducting a Mediation Analysis

1. State your hypothesis

2. Power analysis
  
3. Check your data

4. Check assumptions
  
5. Run the test

6. Interpret results

7. Report

---
### State your hypothesis

+ As before, the hypothesis should name all relevant variables:

+ E.g. 'The effect of X (predictor) on Y (outcome) is mediated by M (mediator).'

--

+ Statistically, you are still investigating `\(\beta\)` values.

+ With mediation, the key result of interest is the indirect effect:

`$$\beta_{indirect} \neq 0$$`
---
### Power Analysis

+ Often done through data simulation &amp; bootstrapping

  + Beyond the scope of this course, but click [here](https://nickch-k.github.io/EconometricsSlides/Week_08/Power_Simulations.html) if you'd like an overview.

+ Have a look at [Fritz &amp; MacKinnon (2007)](https://pmc.ncbi.nlm.nih.gov/articles/PMC2843527/) for guidance around target sample sizes for different effect size thresholds.

---
### Check Assumptions

+ Basic mediation models have the same assumptions as linear regression

+ These assumptions can be checked on the individual regression models that comprise the mediation analysis

+ We can continue in SPSS using [these data](https://mtruelovehill.github.io/ISAP/Data/parentalConflict.sav)

---
class: middle, inverse, center

## Questions?

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
